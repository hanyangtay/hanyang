<% @user ||= current_user %>

<%= link_to @user do %>
      <%= image_tag @user.avatar.url, class: "profile_pic"%>
<% end %>
    
    <br />
    <br />
    
    <%= @user.tagline %>
    
    <br />
    <br />
    <%= link_to user_path(@user) do %>
    <strong> <%= @user.status_posts.count %> </strong> posts
    <% end %>
    
    <br />
    
    <%= link_to user_path(@user, anchor: "following-panel") do %>
    <strong> <%= @user.following.count %> </strong> following,
    <% end %>
    
    <%= link_to user_path(@user, anchor: "followers-panel") do %>
    <strong> <%= @user.followers.count %> </strong> followers
    <% end %>
    
    <br />
    <br />
    <% unless current_user?(@user) %>
                    <% if current_user.following?(@user) %>
                    
                        <%= form_for(current_user.active_relationships.find_by(followed_id: @user.id),
                            html: { method: :delete }) do |f| %>
                            <%= f.submit "Unfollow", class: "mdl-button mdl-js-button 
                                                  mdl-button--raised mdl-js-ripple-effect" %>
                        <% end %>
                        
                    <% else %>
                    
                        <%= form_for(current_user.active_relationships.build) do |f| %>
                            <div><%= hidden_field_tag :followed_id, @user.id %></div>
                            <%= f.submit "Follow", class: "mdl-button mdl-js-button 
                                                          mdl-button--raised mdl-js-ripple-effect mdl-button--colored" %>
                            <% end %>
            
                    <% end %>
    
                <% end %>
