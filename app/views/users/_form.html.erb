<script>
function checkPasswordMatch() {
    var password = $("#password").val();
    var confirmPassword = $("#confirmPassword").val();

    if (password != confirmPassword)
        $("#confirmPassword").parent().addClass('is-invalid');

}

$(document).ready(function () {
   $("#password, #confirmPassword").focusout(checkPasswordMatch);
});
</script>

<div class="mdl-card__supporting-text">
  <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <div class="mdl-textfield mdl-js-textfield">
      <%= f.label :name, "Name", class: "mdl-textfield__label" %>
      <%= f.text_field :name, class: "mdl-textfield__input", pattern: "[a-zA-Z0-9\s]{1,}" %>
      <span class="mdl-textfield__error">Only alphanumeric characters are allowed.</span>
      </div>
      
      <div class="mdl-textfield mdl-js-textfield">
      <%= f.label :email, class: "mdl-textfield__label" %>
      <%= f.email_field :email, class: "mdl-textfield__input" %>
      <span class="mdl-textfield__error">Invalid email address.</span>
      </div>
      
      <div class="mdl-textfield mdl-js-textfield">
      <%= f.label :password, class: "mdl-textfield__label" %>
      <%= f.password_field :password, class: "mdl-textfield__input", 
        pattern: "(?=.*[a-z])(?=.*[0-9])(?=.*[\-\_\/:;,\?'\"\.!@#\$%\^&\*\(\)\+\=])(?=^.{8,}).*$", 
                                        id: "password" %>
      <span class="mdl-textfield__error">Password must contain at least 8 characters, including one numeral and one special character.</span>
      </div>

      <div class="mdl-textfield mdl-js-textfield">
      <%= f.label :password_confirmation, "Confirmation", 
      class: "mdl-textfield__label" %>
      <%= f.password_field :password_confirmation, 
      class: "mdl-textfield__input", id: "confirmPassword" %>
      <span class="mdl-textfield__error">Passwords do not match.</span>
      </div>
      
      <br />
      <br />

      <%= f.submit yield(:button_text), class: "mdl-button mdl-js-button 
                                  mdl-button--raised mdl-js-ripple-effect" %>
    <% end %>
    </div>
